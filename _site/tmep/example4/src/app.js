// var Chess = require('../../assets/libs/chess.min.js').Chess;
var Chess = require('../../chess.js').Chess;
var Chessground = require("chessground");
var Parser = require('@mliebelt/pgn-parser');

var games = [];
var grounds = [];
var n = 1;

var groundOptions = {
    orientation: 'white',
    animation: {
        enabled: true,  // enable piece animations, moving and fading
        duration: 165,  // animation duration in milliseconds
    },
    highlight: {
        lastMove: true,       // add last-move class to squares
        check: true,          // add check class to squares
        dragOver: true        // add drag-over class to square when dragging over it
    },
    movable: {
        free: false, // all moves are valid - board editor
        color: "both", // color that can move. "white" | "black" | "both" | null
        dests: {}, // valid moves. {a2: ["a3", "a4"], b1: ["a3", "c3"]} | null
        dropOff: "revert", // when a piece is dropped outside the board. "revert" | "trash"
        showDests: true, // add the move-dest class to squares
        events: {
            // called after the move has been played
            after: function(orig, dest, metadata) {
                console.log('' + orig + ' ' + dest + ' ' + metadata);
            }
        }
    }
};

for (var i=0; i<n; i++) {
    var newGame = new Chess();
    games.push(newGame);
    var newGround = Chessground(document.getElementById(`ground${i}`), groundOptions);
    grounds.push(newGround);
}

function singleMove(move, gameNum) {
    games[gameNum].move(move);
    grounds[gameNum].set({
        fen: games[gameNum].fen()
    })
}

function timedMover(moves, gameNum, i) {
    if (i < moves.length) {
        singleMove(moves[i++], gameNum);
        window.setTimeout(function() { timedMover(moves, gameNum, i); }, 750);
    }
}

function move(moves, gameNum) {
    window.setTimeout(function() { timedMover(moves, gameNum, 0); }, 500);
}

var pgn =  [
    `[Variant "Atomic"] 1. Nh3 h6 2. d4 e6 3. Bg5 f6 4. Bf4 Bb4+ 5. c3 d6 6. Na3 Bxa3 7. Qa4+ c6 8. O-O-O { 8 ... Ne7 or Nd7 can be met with 9. Bxd6 (or perhaps 9. d5).
        8 ... Na6 allows 9. d5, with tactics similar to those of 1. e4 e6 2. Qh5 g6 3. Qh4 f6 4. f4 Nh6 5. e5 Ng4 6. exf6.
        8 ... e5 allows 9. Bd3 (black does not have 9 ... exd4 10. Qe4 +-), which threatens 10. dxe5, which in turn threatens both 11. Qe4 and 11. Bxa7.
        8 ... h5 followed by 9 ... Na6 is too slow because of 8 ... h5 9. d5 Na6 10. Bd3 Ng4 11. Bxa7. If white gets off 11. Bxa7, a tempo is gained because of the threat of 12. dxc6 b5 13. Qe4. } { [%csl Ga5][%cal Gd8a5,Ga7a5,Gb7b5,Ge6e5,Gf6f5,Gg7g6,Gg7g5,Gh6h5] } 8... Qa5 { [%csl Gd6][%cal Gf4d6,Ge2e4] } (8... b5 9. Qa5 (9. Qc2 f5 10. d5 cxd5 11. Qd3 Nf6 12. Bxd6 Qd4 (12... O-O 13. Qd7) 13. Qxd4 Nd5 14. Nf4 O-O (14... g6 15. Nxe6 O-O) 15. Ng6) 9... Qxa5 { [%csl Gd6][%cal Gf4d6,Ge2e4] } 10. Bxd6 (10. e4 e5 11. Bd2 Ne7 12. dxe5 { [%csl Gg6][%cal Gg7g6,Ge8h8] } 12... g6 (12... O-O 13. Nf4 Bg4 14. Kb1 g6 15. Ne6 Re8 16. f3) 13. e5 O-O 14. Be3 Bg4 15. f3 Bxf3 16. exd6 Nd7) 10... Ne7 (10... Bb7 11. d5 { [%csl Yc5][%cal Yc6c5,Yg8e7] } 11... c5 (11... Ne7 12. dxe6 O-O 13. Nf4 { [%cal Yg7g5,Yf8d8] } 13... g5 (13... Rd8 14. Rd7 Rxd7 15. Ne6 g5 16. Nc7) 14. Ne6 { [%csl Ye8][%cal Yf8e8,Ye8d8,Yg8h8] } 14... Re8 { [%csl Yc5][%cal Ye6c5,Ye6c7] } (14... Rd8 15. Nxd8 Nd7 16. Rd6 c5 17. e4)  (14... Kh8 { [%csl Yd8][%cal Yd1d8,Ye6c7] } 15. Rd8 (15. Nc7) 15... Rxd8 16. Nc7) 15. Nc5 { [%cal Yb7a6,Yb7c8] } 15... Ba6 (15... Bc8 16. Rd7 Bxd7 (16... Re7 17. Rxa7)) 16. Rd7 { [%csl Yd7][%cal Yb8d7,Ye8e7] } 16... Nxd7 (16... Re7 17. Rxa7)))  (10... g5) 11. d5 Ng6 12. dxe6 O-O 13. Rd8 { [%cal Yf8e8,Yg8h8,Yf8d8] } 13... Re8 (13... Kh8 14. Ng5)  (13... Rxd8 14. Nf4 { [%csl Yf4][%cal Yg6f4,Yg6h4] } 14... Nxf4 15. e4 { [%cal Yb8a6,Yb8d7] }))  (8... a5 9. d5 b5 10. Qc2 f5 (10... g6) 11. e4 b4 (11... Na6)  (11... e5 12. Bxe5 g6 (12... Qh4 13. Re1 Ne7 14. Nf4 O-O 15. g3 Qg5 (15... g6 16. gxh4))  (12... f4) 13. e5 cxd5 (13... Ne7 14. Re1 O-O 15. exd6 Be6)  (13... Nf6 14. exf6 Qe7 15. Re1 Qe2 16. Rxe2 O-O 17. Re1) 14. Nf4 d5 15. Qd3 Ne7 16. Ne6 Bxe6 17. Qd4 Nd7)  (11... g6))  (8... h5 9. d5 { [%cal Yg8h6,Gd8a5] } 9... Qa5 (9... Nh6 10. Be3 { [%csl Yg4][%cal Yd8a5,Yh6g4] } 10... Ng4 (10... Qa5 11. Bxa7 Ng4 12. Nf4) 11. Bxa7 O-O (11... Nxh2 12. dxc6+ b5 13. Qe4) 12. Nf4))  (8... Na6 9. d5 Nb4 (9... Kf8)  (9... e5 10. Be3 Bf5 11. Bxa7 Bc2 12. Rd4 Bxa4 (12... exd4) 13. Ra4) 10. dxc6+ b5 11. Qa5 Kf8 12. Qc7 Bd7 (12... Qxc7 13. Bxd6 Rd8 14. Rd7 Rxd7 15. Nf4) 13. cxb4 Qxc7 14. Rd3 b4 15. Rd4)  (8... e5 9. Be3 { dxe5 creates both Qe4 and Bxa7. } 9... b5 (9... Qa5)  (9... Bg4 10. dxe5 Bf5 (10... Be6)  (10... f5 11. Qb3 d5 12. Qb4 c5 13. Qb5+ Nc6 14. Rxd5+) 11. Bxa7)  (9... Na6 10. d5)  (9... Ne7 10. dxe5 Be6 11. Bxa7 Bb3 12. Rd3))  (8... f5 9. d5 { [%csl Gb5][%cal Gb7b5,Ge6e5] } 9... b5 (9... e5 10. Be3 (10. dxc6+ Nc6 (10... b5 11. Qb3) 11. Qb5 { [%csl Ga6][%cal Ga7a6,Gd8a5] } 11... a6 (11... Qa5) 12. Qxb7) 10... a5 { [%csl Gb6][%cal Ge3b6,Gd5c6] } 11. Bb6 (11. dxc6+ b5 { [%csl Gb6][%cal Ge3b6,Ga4b3] } 12. Bb6 { [%csl Gg5][%cal Gd8g5,Gd8h4,Gd8d7] } (12. Qb3 Be6 (12... d5 13. Qa3 Qd6 14. Rxd5 b4 15. Qa4+ Nc6 16. Qd1) 13. Bb6 Qh4 (13... Qc8 14. Bc7 a4 15. Bxb8 a3 16. Qxa3 Bc4 17. e4 Be2 18. Rd2) 14. Rxd6 Qc4 (14... Qb4 15. Bxa5 Rxa2 16. e4) 15. Qd1 Qd5 16. Qd4) 12... Qg5+ (12... Qh4 13. e4 { [%csl Gf6][%cal Gg8f6,Ra4b3,Gg8e7] } 13... Nf6 14. Qb3 Nd5 15. exd5 { [%csl Ge6][%cal Gc8e6,Gh4c4] } 15... Be6 (15... Qc4 16. Bc7 { [%csl Gd7][%cal Gb8d7,Ge8h8] } 16... Nd7 (16... O-O 17. Bxb8 Qxc3 18. Rd3 b4 19. Rd5 Rc8+ 20. Bc4) 17. Bxd6 O-O 18. Rd8 Kh8 19. Qxb5) 16. Rxd6 Qc4 17. Nf4 { [%csl Gg5][%cal Gg7g5,Ge5f4,Gc4c3] } 17... g5 (17... exf4 18. Bd3 O-O (18... Qxc3 19. Re1+ Kd7 20. Rd1+ Ke6 21. Rd6+ Ke7 22. Bd8+ Kf8 23. Be7+ Kf7 24. Bf8 g5 25. Re6) 19. Re1 Re8 20. Re7 Rxe7 21. Qd1)  (17... Qxc3 18. Bc4 bxc4 19. Rd1 Kf7 20. Ne6 g5 21. Nd8+) 18. Ne6) 13. Nxg5 bxa4 14. e4 Ba6 15. Bc4 { [%csl Gc4][%cal Ga6c4,Gd6d5] } 15... Bxc4 (15... d5 16. Bb5+ { [%csl Gb5][%cal Ge8f8,Ga6b5] } 16... Bxb5 (16... Kf8 17. Bd8 { [%csl Gf6][%cal Gg8f6,Ga6b5] } 17... Nf6 (17... Bxb5 18. Be7+ Kf7 19. exd5) 18. Be8 { [%cal Rd8e7,Re8f7,Rf7g8,Rg8h7,Re7f6] } 18... Nc6 19. Be7+ Kg8 20. exd5 $18) 17. exd5 Nf6 18. Rd8+ Ke7 19. Re8+ Kd7 20. Rd1+ Nd5 21. c4 $18) 16. Bc7 Na6 17. Bxd6 Nc5 18. Rd8+ Ke7) 11... Qh4 12. e4)) 9. Bxd6 (9. e4 e5 10. Bxe5 Qb4 11. Qxb4 Ne7 12. e5 Bg4 13. f3 Nc8 14. Ng5 O-O 15. Bc4+ d5 16. Nh7 Re8 17. fxg4 Nd7 18. Rhe1 Ncb6 19. b3 Nxe5) 9... Qb4 10. Qxb4 Ne7 11. d5 Ng6 (11... O-O 12. dxe6) 12. dxe6 O-O 13. Rd8 { [%csl Gh8][%cal Gf8e8,Gg8h8] } 13... Kh8 (13... Re8 14. Rd7 Bxd7 (14... Re7 15. e4 b5 16. Nf4 Nxf4 (16... Nh4 17. Nh5 g5 18. Bc4+ bxc4 19. Rhd1) 17. Rxa7) 15. e4 (15. Nf4 Nxf4 16. e4 Nd7 17. Bc4+ Kh8 18. Rd1 c5 (18... Nf8) 19. Rd6)) 14. Ng5 fxg5 { [%csl Ge4][%cal Gg2g4,Ge2e4] } 15. e4 { [%csl Gd7][%cal Gb8a6,Gb8d7,Gb7b5,Gg7g5,Gc8e6] } (15. g4) 15... Nd7 (15... Na6 16. Bxa6 { [%cal Gc8e6,Gc8g4] } 16... Be6 (16... Bg4 17. f3) 17. f4 Bg4 18. f5 Raxd8 (18... Be2 19. Rd7 Rf7 20. f6 g5 21. e5) 19. f6) *`
    ,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
,`[Variant "Atomic"] 1. Nh3 1... h6 2. d4 d5 3. Nc3 { [%cal Ge7e6,Ga7a6,Gc7c6,Gb7b5] } 3... a6 { [%csl Ge4][%cal Gc3e4,Ge2e4] } (3... e6 { [%cal Gc1f4,Gc1g5] } 4. Bg5 { [%cal Gg8f6,Gh6g5] } (4. Bf4 Qh4 (4... Nf6 5. f3 { [%cal Gf6g4,Gf6e4] } 5... Ng4 (5... Ne4 6. Nxd5) 6. Nb5 { [%csl Gf2][%cal Gg4f2,Gf8b4] } 6... Nf2 (6... Bb4+ 7. c3 Ne3 8. Bxe3) 7. Qc1 Bb4+ 8. c3 { [%cal Gd8g5,Gd8h4] }) 5. g3 Bb4 6. Ng5 Qxg5 7. e4 e5 8. a3) 4... Nf6 (4... hxg5 5. Ng5 f5 { [%cal Ge2e4,Gc3b5] } 6. Nb5) 5. e3 Bb4 6. Qf3 { [%cal Rg5h4] } 6... O-O 7. Bxf6 { [%csl Gh8][%cal Gf7f5,Gg8h8] } 7... Kh8 (7... f5 8. Qg3 { [%csl Gg5][%cal Gd8g5,Gg7g6] } 8... Qg5 (8... g6 9. Qxc7 e5 10. a3) 9. Nxg5 g5 10. Qe5) 8. Qg3 Qg5 9. Nxg5 g6 10. Qxc7 e5 { [%cal Ga2a3,Gd4e5] } 11. dxe5 d4 12. Bb5 d3 13. O-O dxc2) 4. Ne4 (4. e4 { [%cal Ge7e6,Ge7e5] }) 4... Bg4 5. f3 Bxf3 6. g3 { [%cal Gd8d7,Ge7e6] } (6. e4) 6... e6 (6... Qd7 7. Bg2 Qb5 8. Qd3 { [%cal Ge7e6,Ge7e5,Gg7g6] } 8... e5 (8... g6 9. O-O f5 (9... f6 10. Nf4 e6 11. Nh5))  (8... e6 9. O-O { [%cal Gf7f5,Ge8d8] } 9... f5 (9... Kd8 10. Bf4 e5 11. Bg5+ { [%cal Gf7f6,Gg8f6] } 11... Nf6 (11... f6 12. Bxf6 Nf6 13. dxe5) 12. dxe5+ hxg5 13. Rf5 Qb6+ 14. e3 { [%cal Gb6f6,Gh8h6] } 14... Rh6 (14... Qf6 15. Bxd5+ Bd6 16. Rxf6 Rh6 17. Qf5 Re6 18. Rd1) 15. Bxd5+) 10. g4 Bd6 (10... Qxd3 11. gxf5 Bd6 (11... Nf6 12. Ng5 Kd8 13. Nf7+ Kc8 (13... Ke8 14. Nd8) 14. Bf4 e5 15. Nd8 b5 16. Ne6 c5 17. Nxg7) 12. Nf4)  (10... g6 11. gxf5 Bd6 (11... Nf6 12. Ng5) 12. Nf4) 11. Bxd5) 9. O-O f5 10. dxe5 Bb4 (10... Nf6 11. Rxf5 Bc5+ (11... g6) 12. Bxd5 Qxd3 13. Nf4) 11. Qxb5 Nf6 12. e4 O-O 13. Ng5 Ng4 14. h4 Ne3 (14... Nh2 15. Re1 hxg5 16. exd5) 15. Bxe3 hxg5) 7. e4 f5 8. Bg2 f4 { [%cal Rf4g3] } 9. Rf1 { [%csl Gb4][%cal Gf4f3,Gf8b4,Gb8d7] } (9. O-O Ba3 (9... Nf6) 10. gxf4 (10. bxa3 Nf6 11. Ng5) 10... Qf6 11. Bf4 dxe4 (11... Qh4 12. Bg3 Nf6 13. Bxh4 O-O 14. bxa3 Kh8 15. h3 Nbd7 16. exd5 Nd5 17. Rf7 Rxf7 18. Qg4 g6 19. Qxe6) 12. Rxf6 Nf6 13. Ng5 hxg5 14. Qh5+ g6 15. Qh7 Bxb2 16. Bxb7 Rxh7) 9... Bb4+ (9... f3 10. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 10... Nf6 (10... Qf6 11. Bf4)) 10. c3 { [%csl Gf3][%cal Gf4f3,Gg7g6] } 10... f3 (10... g6 11. e5 { [%csl Gd7][%cal Gb8d7,Gg8e7,Gc7c5,Gb8c6,Gc7c6,Ga6a5] } 11... Nd7 (11... Ne7 12. gxf4 Nf5 13. Bg5 O-O 14. Qf3)  (11... c5 12. Ng5 hxg5 13. Bxf4 Nf6 14. Qf3 Nbd7 15. Bh3 Rh4 16. gxh4 Qc7 17. Qh3 O-O-O 18. Qh7 Nxh7 19. Rf7 Kb8 20. Rxd7)  (11... c6 12. Bxf4 Nf6 13. Ng5)  (11... a5 12. Bxf4 Nf6 13. Ng5 O-O 14. Qf3 Nc6 15. Bh3 Bxc3 16. Rc1 b5 17. Kd1 b4 18. Nf7 Nh5 19. Nxd8 Nf4 20. Qh1 Kh8 21. gxf4 Rf4 22. Rxf4 Rf8 23. Qf3) 12. Bxf4 Ngf6 13. Ng5 O-O 14. Qc1 c5 15. Qf4 cxd4 16. Nxe6 Rf5 17. Qxf5 Qf6 18. Rxf6 Rf8 19. Bf3 Bc5 20. O-O-O Be3+) 11. Bxf3 { [%csl Gf6][%cal Gg8f6,Gd8f6] } 11... Nf6 (11... Qf6 12. Bf4 { [%cal Gf6f8,Gd5e4,Gb8d7] } 12... Qf8 (12... dxe4 13. Nf4)  (12... Nd7 13. Ng5 Qg6 14. Qg4) 13. Ng5 g6 14. Nh7 Rxh7) 12. Ng5 O-O *`
]

function findRandomLine(moveArray) {
    var line = []
    var index = 0;
    while (moveArray[index] && moveArray[index]["notation"]) {
        var moveObj = moveArray[index];
        var n = moveObj["variations"].length;
        var random = Math.floor(Math.random() * (n+1));
        if (random == 0) {
            // continue with mainline
            var nextMove = moveObj["notation"]["notation"];
            index++;
            line.push(nextMove)
        }
        else {
            // continue with a variation
            var variationArray = moveObj["variations"][random-1];
            moveArray = variationArray;
            var nextMove = moveArray[0]["notation"]["notation"];
            index = 1;
            line.push(nextMove)
        }
    }
    return line;
}

/* play out random lines in each board */
for (var gameNum=0; gameNum<n; gameNum++) {
    var pgnDataObject = Parser.parse(pgn[gameNum], { startRule: "game" });
    var moves = findRandomLine(pgnDataObject["moves"]);
    console.log(moves);
    move(moves, gameNum);
}